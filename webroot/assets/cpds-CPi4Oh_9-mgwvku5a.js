import{s as u,h as g,c as h,_ as m}from"./shared-BObi8OaW-mgwvku50.js";import"./htmx.esm-hCWdS4WT-mgwvku55.js";/* empty css                        */async function f(){const e=await fetch("/ids/auth/refresh",{method:"POST",credentials:"include"});if(e.ok){const{access_token:t,refresh_token:n}=await e.json();return window.localStorage.setItem("access_token",t),window.localStorage.setItem("refresh_token",n),window.localStorage.setItem("is_authenticated","true"),!0}else return window.localStorage.removeItem("access_token"),window.localStorage.removeItem("refresh_token"),window.localStorage.setItem("is_authenticated","false"),!1}function a(e,t){const n=new Date().toLocaleTimeString(),l=`[${n}] ${t}`,o=document.getElementById(e);if(o){o.querySelector(".console-welcome")&&(o.innerHTML="");const s=document.createElement("div");s.className="console-log-line",s.innerHTML=`<span class="console-timestamp">${n}</span> ${t}`,o.appendChild(s),o.scrollTop=o.scrollHeight}}function d(e){const t=document.getElementById("login"),n=document.getElementById("logout"),l=document.getElementById("userinfo"),o=document.getElementById("callapi"),r=document.getElementById("switch");e?(t?.classList.add("hidden"),n?.classList.remove("hidden"),l?.classList.remove("hidden"),o?.classList.remove("hidden")):(t?.classList.remove("hidden"),n?.classList.add("hidden"),l?.classList.add("hidden"),o?.classList.add("hidden")),r?.classList.remove("hidden");const s=document.getElementById("auth-status-3d"),c=document.querySelector(".status-dot"),i=document.querySelector(".status-text");s&&i&&(e?(s.classList.remove("status-offline"),s.classList.add("status-online"),i.textContent="Authenticated"):(s.classList.remove("status-online"),s.classList.add("status-offline"),i.textContent="Not Authenticated")),c&&(e?c.classList.add("online"):c.classList.remove("online"))}window.onload=async()=>{u();let e=!1;try{if(!await f()){a("out","State: not authenticated, please login"),d(!1),window.location.hash.includes("switcher")?location.href="/ids/auth/login":e=!0;return}a("out","Authenticated successfully"),d(!0);var t=setInterval(async()=>{if(!await f()){a("out","State: not authenticated, clearing interval"),clearInterval(t),d(!1);return}},6e4);e=!0}catch(n){a("out","Init error: "+n)}finally{e&&g()}};document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{typeof window.InteractiveEffects<"u"&&window.InteractiveEffects.enhanceLoadingOverlay()},200);const e=document.getElementById("login");e&&(e.onclick=()=>{u(),location.href="/ids/auth/login"});const t=document.getElementById("logout");t&&(t.onclick=()=>{u(),location.href="/ids/auth/logout"});const n=document.getElementById("userinfo");n&&(n.onclick=async()=>{if(!(window.localStorage.getItem("is_authenticated")==="true"&&window.localStorage.getItem("access_token")))return a("out","Not logged in");const i=await fetch("/ids/me",{credentials:"include",headers:{Authorization:"Bearer "+window.localStorage.getItem("access_token")}});a("out","userinfo: "+JSON.stringify(await i.json(),null,2))});const l=document.getElementById("callapi");l&&(l.onclick=async()=>{if(!(window.localStorage.getItem("is_authenticated")==="true"&&window.localStorage.getItem("access_token")))return a("out","Not logged in");const i=await h("/cpds/api/hello",window.localStorage.getItem("access_token"));a("out",`CPDS API [${i.status}]:
${i.body}`)});const o=document.getElementById("switch");o&&(o.onclick=()=>{window.location.href="/aceas/#switcher"});const r=document.getElementById("clear-console");r&&r.addEventListener("click",()=>{const c=document.getElementById("out");c&&(c.innerHTML=`
                    <span class="console-welcome">ðŸ‘¥ Welcome to CPDS Personnel Management Platform</span><br>
                    <span class="console-info">ðŸš€ Government SSO ready for interaction...</span><br>
                    <span class="console-timestamp">[${new Date().toLocaleTimeString()}] Console cleared</span>
                `)});const s=document.getElementById("copy-console");s&&s.addEventListener("click",async()=>{const c=document.getElementById("out");if(c)try{const i=c.textContent||c.innerText;await navigator.clipboard.writeText(i),a("out","Console content copied to clipboard")}catch(i){a("out","Failed to copy console content: "+i.message)}})});window.cpdsAuth={clearConsole:()=>{const e=document.getElementById("out");e&&(e.innerHTML=`
                <span class="console-welcome">ðŸ‘¥ Welcome to CPDS Personnel Management Platform</span><br>
                <span class="console-info">ðŸš€ Government SSO ready for interaction...</span><br>
                <span class="console-timestamp">[${new Date().toLocaleTimeString()}] Console cleared</span>
            `)}};document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const n=document.querySelector(this.getAttribute("href"));n&&n.scrollIntoView({behavior:"smooth"})})}),setTimeout(()=>{typeof window.InteractiveEffects<"u"&&window.InteractiveEffects.enhanceLoadingOverlay()},200),window.testEnhancedLoading=function(){m(async()=>{const{showLoading:e,hideLoading:t}=await import("./shared-BObi8OaW-mgwvku50.js").then(n=>n.u);return{showLoading:e,hideLoading:t}},[]).then(({showLoading:e,hideLoading:t})=>{e("Testing Enhanced 3D Loading..."),setTimeout(()=>{t()},4e3)})},window.test3DScrollEffects=function(){["scroll-fade-in","scroll-slide-left","scroll-slide-right","scroll-scale-up","scroll-3d-flip","scroll-3d-rotate","scroll-3d-bounce","scroll-3d-fold","scroll-3d-depth","scroll-3d-parallax","scroll-3d-perspective"].forEach(t=>{const n=document.querySelectorAll(`.${t}`)})},window.testPerspectiveScaling=function(){document.querySelectorAll(".scroll-3d-perspective").forEach((t,n)=>{const l=t.getBoundingClientRect(),o=window.innerWidth/2,r=window.innerHeight/2,s=l.left+l.width/2,c=l.top+l.height/2})},setTimeout(()=>{m(async()=>{const{hideLoading:e}=await import("./shared-BObi8OaW-mgwvku50.js").then(t=>t.u);return{hideLoading:e}},[]).then(({hideLoading:e})=>{e()})},2500)});
//# sourceMappingURL=cpds-CPi4Oh_9-mgwvku5a.js.map
