import"../modulepreload-polyfill-B5Qt9EMX-mgxdv7n7.js";import"../vendor-htmx-hCWdS4WT-mgxdv7mp.js";import{E as b,d as v}from"../vendor-signals-CeVd-X9L-mgxdv7m4.js";/* empty css                         */import{h as A,s as U,c as M}from"../util-Bgifhk2q-mgxdv7ne.js";import{o as r}from"../oidc-iNNdlT98-mgxdv7ne.js";import"../vendor-oidc-C7bVSgrn-mgxdv7me.js";const f=document.getElementById("login"),h=document.getElementById("logout"),g=document.getElementById("userinfo"),m=document.getElementById("callapi"),w=document.getElementById("switch"),u=document.getElementById("auth-status-3d"),B=document.getElementById("clear-console"),I=document.getElementById("copy-console"),q=document.getElementById("theme-toggle-3d"),c={isAuthenticated:v(!1),isLoading:v(!1),userInfo:v(null)};class P{constructor(){this.isInitialized=!1,this.animationQueue=[],this.observers=new Map}init(){this.isInitialized||(this.initializeScrollAnimations(),this.initializeParallaxEffects(),this.initializeMouseTracking(),this.initializeLoadingAnimations(),this.initializeConsoleEffects(),this.isInitialized=!0)}initializeScrollAnimations(){const t={threshold:.1,rootMargin:"0px 0px -50px 0px"},i=new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&s.target.classList.add("animate")})},t);document.querySelectorAll(".fade-in-up, .fade-in-left, .fade-in-right, .fade-in-scale").forEach(o=>{i.observe(o)}),this.observers.set("scroll",i)}initializeParallaxEffects(){const t=document.querySelectorAll(".hero-pattern, .hero-particles");window.addEventListener("scroll",()=>{const o=window.pageYOffset*-.5;t.forEach((s,a)=>{const l=o*(.5+a*.2);s.style.transform=`translateY(${l}px)`})})}initializeMouseTracking(){document.querySelectorAll(".action-card, .info-card, .dashboard-preview").forEach(i=>{i.addEventListener("mousemove",o=>{const s=i.getBoundingClientRect(),a=o.clientX-s.left,l=o.clientY-s.top,y=s.width/2,k=s.height/2,O=(l-k)/k*-10,z=(a-y)/y*10;i.style.transform=`perspective(1000px) rotateX(${O}deg) rotateY(${z}deg) translateZ(20px)`}),i.addEventListener("mouseleave",()=>{i.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)"})})}initializeLoadingAnimations(){const t=document.getElementById("loading-overlay");t&&setTimeout(()=>{t.style.opacity="0",t.style.transform="scale(0.9)",setTimeout(()=>{t.style.display="none"},500)},2e3)}initializeConsoleEffects(){document.querySelector(".console-wrapper")&&new MutationObserver(()=>{this.triggerConsolePulse()}).observe(document.getElementById("out"),{childList:!0,subtree:!0,characterData:!0})}triggerConsolePulse(){const t=document.querySelector(".console-wrapper");t&&(t.classList.add("console-pulse"),setTimeout(()=>{t.classList.remove("console-pulse")},2e3))}triggerButtonAnimation(t,i="success"){if(!t)return;t.classList.add("animate-press"),t.style.transform="scale(0.95)";const o=document.createElement("div");o.className="button-ripple",t.appendChild(o),setTimeout(()=>{t.style.transform="",t.classList.remove("animate-press"),o.parentNode&&o.parentNode.removeChild(o)},300)}showToast(t,i="success"){const o=document.getElementById("toast-3d"),s=document.querySelector(".toast-message-3d");o&&s&&(s.textContent=t,o.classList.add("show"),setTimeout(()=>{o.classList.remove("show")},3e3))}}const d=new P;async function S(){try{n("🔐 Initiating ACEAS login...","info"),d.triggerButtonAnimation(f),await r.signinRedirect()}catch(e){n(`❌ Login failed: ${e.message}`,"error")}}async function T(){try{n("🚪 Initiating logout...","info"),d.triggerButtonAnimation(h),await r.signoutRedirect({post_logout_redirect_uri:`${window.location.origin}/aceas/`}),await r.removeUser(),c.isAuthenticated.value=!1,n("✅ Logout completed","success")}catch(e){n(`❌ Logout failed: ${e.message}`,"error")}}async function E(){try{const e=await r.getUser();if(!e){n("❌ Not logged in!","error");return}n("👤 Fetching user information from Keycloak...","info"),d.triggerButtonAnimation(g);const i=await(await fetch("http://eservice.localhost/auth/realms/agency-realm/protocol/openid-connect/userinfo",{headers:{Authorization:`Bearer ${e.access_token}`}})).json();c.userInfo.value=i,n("✅ Keycloak userinfo retrieved:","success"),n(`📋 User Info:
${JSON.stringify(i,null,2)}`,"info")}catch(e){n(`❌ Failed to get user info: ${e.message}`,"error")}}async function $(){try{const e=await r.getUser();if(!e){n("❌ Login first","error");return}n("🌐 Calling ACEAS API...","info"),d.triggerButtonAnimation(m);const t=await M("/aceas/api/hello",e.access_token);n("✅ ACEAS API response received:","success"),n(`📊 ACEAS API [${t.status}]:
${t.body}`,"info")}catch(e){n(`❌ ACEAS API call failed: ${e.message}`,"error")}}function D(){n("🔄 Switching to CPDS platform...","info"),d.triggerButtonAnimation(w),window.location.href="/cpds/#switcher"}function n(e,t="info"){const o=`[${new Date().toLocaleTimeString()}]`;let s;switch(t){case"success":s=`<span class="console-success">${o} ✅ ${e}</span>`;break;case"error":s=`<span class="console-error">${o} ❌ ${e}</span>`;break;case"info":s=`<span class="console-info">${o} ℹ️  ${e}</span>`;break;case"warning":s=`<span class="console-warning">${o} ⚠️  ${e}</span>`;break;default:s=`<span class="console-timestamp">${o}</span> ${e}`}const a=document.getElementById("out");if(a){a.innerHTML+=`
`+s,a.scrollTop=a.scrollHeight;const l=a.lastElementChild;l&&l.classList.add("api-result-highlight")}d.triggerConsolePulse()}function C(){const e=document.getElementById("out");e&&(e.innerHTML=`
<span class="console-welcome">🔐 Welcome to ACEAS Authentication Platform</span>
<span class="console-info">🚀 Enterprise SSO ready for interaction...</span>
<span class="console-timestamp">[${new Date().toLocaleTimeString()}] Console cleared</span>
        `.trim(),d.showToast("Console cleared successfully!"))}function Y(){const e=document.getElementById("out");if(e){const t=e.textContent;navigator.clipboard.writeText(t).then(()=>{d.showToast("Console content copied to clipboard!")}).catch(i=>{d.showToast("Failed to copy console content","error")})}}function p(e,t=null){if(!u)return;const i=u.querySelector(".status-pulse"),o=u.querySelector(".status-text");if(e){u.className="status-indicator-3d status-online",i&&(i.style.background="#10b981"),o&&(o.textContent=t?`${t.preferred_username||"User"}`:"Authenticated");const s=document.getElementById("console-status");if(s){const a=s.querySelector(".status-indicator"),l=s.querySelector("span");a&&(a.style.background="#10b981"),l&&(l.textContent="Authenticated",l.style.color="#10b981")}}else{u.className="status-indicator-3d status-offline",i&&(i.style.background="#dc2626"),o&&(o.textContent="Not Authenticated");const s=document.getElementById("console-status");if(s){const a=s.querySelector(".status-indicator"),l=s.querySelector("span");a&&(a.style.background="#dc2626"),l&&(l.textContent="Ready",l.style.color="#10b981")}}u&&(u.style.transform="scale(1.1)",setTimeout(()=>{u.style.transform=""},200))}b(()=>{c.isLoading.value&&n("⏳ System processing...","info")});function N(){localStorage.getItem("theme")==="dark"&&document.body.classList.add("dark")}function L(e){const i=document.getElementById("loading-overlay")?.querySelector(".loading-message-3d");i&&(i.textContent=e),U()}async function x(){n("🔍 Checking ACEAS SSO status...","info"),L("Checking authentication cache...");try{const e=await r.getUser();if(e&&!e.expired)return n("✅ Using cached ACEAS session","success"),n(`📋 Cached User: ${JSON.stringify(e.profile,null,2)}`,"info"),p(!0,e.profile),!0;L("Verifying SSO session...");const t=await r.signinSilent();if(t&&!t.expired)return n("✅ Silent signin successful - ACEAS SSO session active","success"),n(`📋 Silent User: ${JSON.stringify(t.profile,null,2)}`,"info"),p(!0,t.profile),!0}catch(e){n(`⚠️ ACEAS SSO check failed: ${e.message}`,"warning")}return n("ℹ️ No active ACEAS SSO session found","info"),p(!1),!1}function X(){const e=document.body,t=e.classList.contains("dark");t?(e.classList.remove("dark"),localStorage.setItem("theme","light"),d.showToast("Switched to light theme")):(e.classList.add("dark"),localStorage.setItem("theme","dark"),d.showToast("Switched to dark theme")),n(`🎨 Theme switched to ${t?"light":"dark"} mode`,"info")}async function F(){c.isLoading.value=!0;try{const e=await x();if(c.isAuthenticated.value=e,!e&&window.location.hash.includes("switcher")){await r.signinRedirect();return}r.events.addAccessTokenExpiring(async()=>{try{await r.signinSilent(),n("🔄 Token expiring → silent renew successful","success")}catch(t){n(`⚠️ Silent renew error: ${t.message}`,"warning")}}),r.events.addAccessTokenExpired(async()=>{try{await r.signinSilent(),n("🔄 Token expired → silent renew successful","success")}catch(t){n(`❌ Silent renew error: ${t.message}`,"error"),c.isAuthenticated.value=!1}}),r.events.addUserSignedOut(async()=>{await r.removeUser(),c.isAuthenticated.value=!1,n("👋 User signed out","info")}),n("🎯 ACEAS authentication system initialized","success"),n(`📊 Authentication status: ${e?"Active":"Inactive"}`,"info")}catch(e){n(`❌ Authentication bootstrap failed: ${e.message}`,"error"),c.isAuthenticated.value=!1}finally{c.isLoading.value=!1,A()}}function K(){f&&f.addEventListener("click",S),h&&h.addEventListener("click",T),g&&g.addEventListener("click",E),m&&m.addEventListener("click",$),w&&w.addEventListener("click",D),B&&B.addEventListener("click",C),I&&I.addEventListener("click",Y),q?.addEventListener("click",X),document.querySelectorAll(".action-card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transition="all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)"})}),document.addEventListener("keydown",e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"l":e.preventDefault(),!c.isAuthenticated.value&&f&&!f.classList.contains("hidden")&&S();break;case"k":e.preventDefault(),C();break;case"u":e.preventDefault(),c.isAuthenticated.value&&g&&!g.classList.contains("hidden")&&E();break}})}b(()=>{const e=c.isAuthenticated.value;e?(f.classList.add("hidden"),h.classList.remove("hidden"),g.classList.remove("hidden"),m.classList.remove("hidden")):(f.classList.remove("hidden"),h.classList.add("hidden"),g.classList.add("hidden"),m.classList.add("hidden")),p(e,c.userInfo.value),e?(n("🎉 User successfully authenticated in ACEAS","success"),d.showToast("Welcome to ACEAS! Authentication successful.","success")):n("👤 User not authenticated - showing login options","info")});b(()=>{c.isLoading.value&&n("⏳ System processing...","info")});document.addEventListener("DOMContentLoaded",()=>{N(),K(),setTimeout(()=>{d.init()},100),setTimeout(()=>{typeof window.InteractiveEffects<"u"&&window.InteractiveEffects.enhanceLoadingOverlay()},200),window.testEnhancedLoading=function(){L("Testing Enhanced 3D Loading..."),setTimeout(()=>{A()},4e3)},window.test3DScrollEffects=function(){["scroll-fade-in","scroll-slide-left","scroll-slide-right","scroll-scale-up","scroll-3d-flip","scroll-3d-rotate","scroll-3d-bounce","scroll-3d-fold","scroll-3d-depth","scroll-3d-parallax","scroll-3d-perspective"].forEach(t=>{const i=document.querySelectorAll(`.${t}`)})},window.testPerspectiveScaling=function(){document.querySelectorAll(".scroll-3d-perspective").forEach((t,i)=>{const o=t.getBoundingClientRect(),s=window.innerWidth/2,a=window.innerHeight/2,l=o.left+o.width/2,y=o.top+o.height/2})},setTimeout(()=>{F()},500),setTimeout(()=>{n("🏛️ ACEAS - Agency Corporate E-Authentication Service","info"),n("🔐 Enterprise-grade authentication powered by Keycloak","info"),n("🌟 Modern SaaS platform ready for interaction","success"),n("💡 Tip: Use Ctrl+L to login, Ctrl+K to clear console, Ctrl+U for user info","info"),A()},2500)});document.addEventListener("visibilitychange",()=>{!document.hidden&&c.isAuthenticated.value&&x()});window.aceaAuth={state:c,login:S,logout:T,userInfo:E,callApi:$,clearConsole:C,animationController:d};
//# sourceMappingURL=index-Aa2OhsDa-mgxdv7m4.js.map
