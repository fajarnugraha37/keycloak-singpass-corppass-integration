{"version":3,"file":"index-BAPXn9px-mgxfcc6h.js","sources":["../../../web/aceas/index.js"],"sourcesContent":["import 'htmx.org';\r\nimport { signal, effect } from \"@preact/signals\";\r\n\r\nimport './index.css';\r\nimport '../__styles__/style.css';\r\nimport '../__styles__/common.scss';\r\nimport '../__scripts__/interactive-effects.js';\r\nimport { callApi, showLoading, hideLoading } from \"../__scripts__/util.js\";\r\nimport { oidc } from \"../__scripts__/oidc.js\";\r\n\r\n// DOM elements\r\nconst loginBtn = document.getElementById(\"login\");\r\nconst logoutBtn = document.getElementById(\"logout\");\r\nconst userInfoBtn = document.getElementById(\"userinfo\");\r\nconst callApiBtn = document.getElementById(\"callapi\");\r\nconst switchBtn = document.getElementById(\"switch\");\r\nconst authStatus = document.getElementById(\"auth-status-3d\");\r\nconst clearConsoleBtn = document.getElementById(\"clear-console\");\r\nconst copyConsoleBtn = document.getElementById(\"copy-console\");\r\nconst themeToggle = document.getElementById(\"theme-toggle-3d\");\r\n\r\n// State management\r\nconst state = {\r\n    isAuthenticated: signal(false),\r\n    isLoading: signal(false),\r\n    userInfo: signal(null),\r\n};\r\n\r\n// Enhanced 3D Animation System\r\nclass AceaAnimationController {\r\n    constructor() {\r\n        this.isInitialized = false;\r\n        this.animationQueue = [];\r\n        this.observers = new Map();\r\n    }\r\n\r\n    init() {\r\n        if (this.isInitialized) return;\r\n\r\n        this.initializeScrollAnimations();\r\n        this.initializeParallaxEffects();\r\n        this.initializeMouseTracking();\r\n        this.initializeLoadingAnimations();\r\n        this.initializeConsoleEffects();\r\n\r\n        this.isInitialized = true;\r\n    }\r\n\r\n    initializeScrollAnimations() {\r\n        const observerOptions = {\r\n            threshold: 0.1,\r\n            rootMargin: '0px 0px -50px 0px'\r\n        };\r\n\r\n        const observer = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.classList.add('animate');\r\n                }\r\n            });\r\n        }, observerOptions);\r\n\r\n        // Observe all animatable elements\r\n        document.querySelectorAll('.fade-in-up, .fade-in-left, .fade-in-right, .fade-in-scale').forEach(el => {\r\n            observer.observe(el);\r\n        });\r\n\r\n        this.observers.set('scroll', observer);\r\n    }\r\n\r\n    initializeParallaxEffects() {\r\n        const parallaxElements = document.querySelectorAll('.hero-pattern, .hero-particles');\r\n\r\n        window.addEventListener('scroll', () => {\r\n            const scrolled = window.pageYOffset;\r\n            const rate = scrolled * -0.5;\r\n\r\n            parallaxElements.forEach((element, index) => {\r\n                const offset = rate * (0.5 + index * 0.2);\r\n                element.style.transform = `translateY(${offset}px)`;\r\n            });\r\n        });\r\n    }\r\n\r\n    initializeMouseTracking() {\r\n        const cards = document.querySelectorAll('.action-card, .info-card, .dashboard-preview');\r\n\r\n        cards.forEach(card => {\r\n            card.addEventListener('mousemove', (e) => {\r\n                const rect = card.getBoundingClientRect();\r\n                const x = e.clientX - rect.left;\r\n                const y = e.clientY - rect.top;\r\n                const centerX = rect.width / 2;\r\n                const centerY = rect.height / 2;\r\n\r\n                const rotateX = (y - centerY) / centerY * -10;\r\n                const rotateY = (x - centerX) / centerX * 10;\r\n\r\n                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(20px)`;\r\n            });\r\n\r\n            card.addEventListener('mouseleave', () => {\r\n                card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)';\r\n            });\r\n        });\r\n    }\r\n\r\n    initializeLoadingAnimations() {\r\n        const loadingOverlay = document.getElementById('loading-overlay');\r\n        if (loadingOverlay) {\r\n            setTimeout(() => {\r\n                loadingOverlay.style.opacity = '0';\r\n                loadingOverlay.style.transform = 'scale(0.9)';\r\n                setTimeout(() => {\r\n                    loadingOverlay.style.display = 'none';\r\n                }, 500);\r\n            }, 2000);\r\n        }\r\n    }\r\n\r\n    initializeConsoleEffects() {\r\n        const consoleWrapper = document.querySelector('.console-wrapper');\r\n        if (consoleWrapper) {\r\n            // Add pulse effect when new content is added\r\n            const observer = new MutationObserver(() => {\r\n                this.triggerConsolePulse();\r\n            });\r\n\r\n            observer.observe(document.getElementById('out'), {\r\n                childList: true,\r\n                subtree: true,\r\n                characterData: true\r\n            });\r\n        }\r\n    }\r\n\r\n    triggerConsolePulse() {\r\n        const consoleWrapper = document.querySelector('.console-wrapper');\r\n        if (consoleWrapper) {\r\n            consoleWrapper.classList.add('console-pulse');\r\n            setTimeout(() => {\r\n                consoleWrapper.classList.remove('console-pulse');\r\n            }, 2000);\r\n        }\r\n    }\r\n\r\n    triggerButtonAnimation(button, type = 'success') {\r\n        if (!button) return;\r\n\r\n        // Add animation classes\r\n        button.classList.add('animate-press');\r\n        button.style.transform = 'scale(0.95)';\r\n\r\n        // Create ripple effect\r\n        const ripple = document.createElement('div');\r\n        ripple.className = 'button-ripple';\r\n        button.appendChild(ripple);\r\n\r\n        setTimeout(() => {\r\n            button.style.transform = '';\r\n            button.classList.remove('animate-press');\r\n            if (ripple.parentNode) {\r\n                ripple.parentNode.removeChild(ripple);\r\n            }\r\n        }, 300);\r\n    }\r\n\r\n    showToast(message, type = 'success') {\r\n        const toast = document.getElementById('toast-3d');\r\n        const messageElement = document.querySelector('.toast-message-3d');\r\n\r\n        if (toast && messageElement) {\r\n            messageElement.textContent = message;\r\n            toast.classList.add('show');\r\n\r\n            setTimeout(() => {\r\n                toast.classList.remove('show');\r\n            }, 3000);\r\n        }\r\n    }\r\n}\r\n\r\n// Initialize animation controller\r\nconst animationController = new AceaAnimationController();\r\n\r\n// Handler functions for authentication actions\r\nasync function handleLogin() {\r\n    try {\r\n        enhancedLog(\"üîê Initiating ACEAS login...\", 'info');\r\n        animationController.triggerButtonAnimation(loginBtn);\r\n        await oidc.signinRedirect();\r\n    } catch (error) {\r\n        enhancedLog(`‚ùå Login failed: ${error.message}`, 'error');\r\n    }\r\n}\r\n\r\nasync function handleLogout() {\r\n    try {\r\n        enhancedLog(\"üö™ Initiating logout...\", 'info');\r\n        animationController.triggerButtonAnimation(logoutBtn);\r\n        await oidc.signoutRedirect({\r\n            post_logout_redirect_uri: `${window.location.origin}/aceas/`\r\n        });\r\n        await oidc.removeUser();\r\n        state.isAuthenticated.value = false;\r\n        enhancedLog(\"‚úÖ Logout completed\", 'success');\r\n    } catch (error) {\r\n        enhancedLog(`‚ùå Logout failed: ${error.message}`, 'error');\r\n    }\r\n}\r\n\r\nasync function handleUserInfo() {\r\n    try {\r\n        const u = await oidc.getUser();\r\n        if (!u) {\r\n            enhancedLog(\"‚ùå Not logged in!\", 'error');\r\n            return;\r\n        }\r\n\r\n        enhancedLog(\"üë§ Fetching user information from Keycloak...\", 'info');\r\n        animationController.triggerButtonAnimation(userInfoBtn);\r\n\r\n        const res = await fetch(\r\n            \"http://eservice.localhost/auth/realms/agency-realm/protocol/openid-connect/userinfo\",\r\n            { headers: { Authorization: `Bearer ${u.access_token}` } }\r\n        );\r\n        const info = await res.json();\r\n        state.userInfo.value = info;\r\n        enhancedLog(\"‚úÖ Keycloak userinfo retrieved:\", 'success');\r\n        enhancedLog(`üìã User Info:\\n${JSON.stringify(info, null, 2)}`, 'info');\r\n\r\n    } catch (error) {\r\n        enhancedLog(`‚ùå Failed to get user info: ${error.message}`, 'error');\r\n    }\r\n}\r\n\r\nasync function handleCallApi() {\r\n    try {\r\n        const u = await oidc.getUser();\r\n        if (!u) {\r\n            enhancedLog(\"‚ùå Login first\", 'error');\r\n            return;\r\n        }\r\n\r\n        enhancedLog(\"üåê Calling ACEAS API...\", 'info');\r\n        animationController.triggerButtonAnimation(callApiBtn);\r\n        const r = await callApi(\"/aceas/api/hello\", u.access_token);\r\n        enhancedLog(\"‚úÖ ACEAS API response received:\", 'success');\r\n        enhancedLog(`üìä ACEAS API [${r.status}]:\\n${r.body}`, 'info');\r\n\r\n    } catch (error) {\r\n        enhancedLog(`‚ùå ACEAS API call failed: ${error.message}`, 'error');\r\n    }\r\n}\r\n\r\nfunction handleSwitch() {\r\n    enhancedLog(\"üîÑ Switching to CPDS platform...\", 'info');\r\n    animationController.triggerButtonAnimation(switchBtn);\r\n    window.location.href = '/cpds/#switcher';\r\n}\r\n\r\n// Enhanced logging with 3D console effects\r\nfunction enhancedLog(message, type = 'info') {\r\n    const timestamp = new Date().toLocaleTimeString();\r\n    const prefix = `[${timestamp}]`;\r\n\r\n    let styledMessage;\r\n    switch (type) {\r\n        case 'success':\r\n            styledMessage = `<span class=\"console-success\">${prefix} ‚úÖ ${message}</span>`;\r\n            break;\r\n        case 'error':\r\n            styledMessage = `<span class=\"console-error\">${prefix} ‚ùå ${message}</span>`;\r\n            break;\r\n        case 'info':\r\n            styledMessage = `<span class=\"console-info\">${prefix} ‚ÑπÔ∏è  ${message}</span>`;\r\n            break;\r\n        case 'warning':\r\n            styledMessage = `<span class=\"console-warning\">${prefix} ‚ö†Ô∏è  ${message}</span>`;\r\n            break;\r\n        default:\r\n            styledMessage = `<span class=\"console-timestamp\">${prefix}</span> ${message}`;\r\n    }\r\n\r\n    const consoleOutput = document.getElementById('out');\r\n    if (consoleOutput) {\r\n        consoleOutput.innerHTML += '\\n' + styledMessage;\r\n        consoleOutput.scrollTop = consoleOutput.scrollHeight;\r\n\r\n        // Add highlight animation\r\n        const newLine = consoleOutput.lastElementChild;\r\n        if (newLine) {\r\n            newLine.classList.add('api-result-highlight');\r\n        }\r\n    }\r\n\r\n    console.log(`${prefix} [${type.toUpperCase()}] ${message}`);\r\n\r\n    // Trigger console pulse animation\r\n    animationController.triggerConsolePulse();\r\n}\r\n\r\n// Clear console functionality with 3D effects\r\nfunction clearConsole() {\r\n    console.log(\"üßπ Clear console function called\");\r\n    const consoleOutput = document.getElementById('out');\r\n    if (consoleOutput) {\r\n        consoleOutput.innerHTML = `\r\n<span class=\"console-welcome\">üîê Welcome to ACEAS Authentication Platform</span>\r\n<span class=\"console-info\">üöÄ Enterprise SSO ready for interaction...</span>\r\n<span class=\"console-timestamp\">[${new Date().toLocaleTimeString()}] Console cleared</span>\r\n        `.trim();\r\n        console.log(\"‚úÖ Console content cleared\");\r\n        animationController.showToast('Console cleared successfully!');\r\n    } else {\r\n        console.error(\"‚ùå Console output element not found\");\r\n    }\r\n}\r\n\r\n// Copy console content with animation\r\nfunction copyConsoleContent() {\r\n    console.log(\"üìã Copy console function called\");\r\n    const consoleOutput = document.getElementById('out');\r\n    if (consoleOutput) {\r\n        const textContent = consoleOutput.textContent;\r\n        navigator.clipboard.writeText(textContent).then(() => {\r\n            console.log(\"‚úÖ Console content copied to clipboard\");\r\n            animationController.showToast('Console content copied to clipboard!');\r\n        }).catch((error) => {\r\n            console.error(\"‚ùå Failed to copy content:\", error);\r\n            animationController.showToast('Failed to copy console content', 'error');\r\n        });\r\n    } else {\r\n        console.error(\"‚ùå Console output element not found\");\r\n    }\r\n}\r\n\r\n// Update authentication status indicator with 3D effects\r\nfunction updateAuthStatus(isAuthenticated, userInfo = null) {\r\n    if (!authStatus) return;\r\n\r\n    const statusPulse = authStatus.querySelector('.status-pulse');\r\n    const statusText = authStatus.querySelector('.status-text');\r\n\r\n    if (isAuthenticated) {\r\n        authStatus.className = 'status-indicator-3d status-online';\r\n        if (statusPulse) statusPulse.style.background = '#10b981';\r\n        if (statusText) statusText.textContent = userInfo ? `${userInfo.preferred_username || 'User'}` : 'Authenticated';\r\n\r\n        // Update console status\r\n        const consoleStatus = document.getElementById('console-status');\r\n        if (consoleStatus) {\r\n            const indicator = consoleStatus.querySelector('.status-indicator');\r\n            const text = consoleStatus.querySelector('span');\r\n            if (indicator) indicator.style.background = '#10b981';\r\n            if (text) {\r\n                text.textContent = 'Authenticated';\r\n                text.style.color = '#10b981';\r\n            }\r\n        }\r\n    } else {\r\n        authStatus.className = 'status-indicator-3d status-offline';\r\n        if (statusPulse) statusPulse.style.background = '#dc2626';\r\n        if (statusText) statusText.textContent = 'Not Authenticated';\r\n\r\n        // Update console status\r\n        const consoleStatus = document.getElementById('console-status');\r\n        if (consoleStatus) {\r\n            const indicator = consoleStatus.querySelector('.status-indicator');\r\n            const text = consoleStatus.querySelector('span');\r\n            if (indicator) indicator.style.background = '#dc2626';\r\n            if (text) {\r\n                text.textContent = 'Ready';\r\n                text.style.color = '#10b981';\r\n            }\r\n        }\r\n    }\r\n\r\n    // Animate status change\r\n    if (authStatus) {\r\n        authStatus.style.transform = 'scale(1.1)';\r\n        setTimeout(() => {\r\n            authStatus.style.transform = '';\r\n        }, 200);\r\n    }\r\n}\r\n\r\n// Enhanced button visibility with 3D animations\r\nfunction updateButtonVisibility(isAuthenticated) {\r\n    const buttons = [\r\n        { element: loginBtn, showWhen: !isAuthenticated },\r\n        { element: logoutBtn, showWhen: isAuthenticated },\r\n        { element: userInfoBtn, showWhen: isAuthenticated },\r\n        { element: callApiBtn, showWhen: isAuthenticated },\r\n    ];\r\n\r\n    buttons.forEach(({ element, showWhen }) => {\r\n        if (!element) return;\r\n\r\n        if (showWhen) {\r\n            element.classList.remove('hidden');\r\n            element.style.display = 'inline-flex'; // Ensure proper display\r\n            element.style.opacity = '0';\r\n            element.style.transform = 'translateY(20px) scale(0.9)';\r\n\r\n            setTimeout(() => {\r\n                element.style.transition = 'all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\r\n                element.style.opacity = '1';\r\n                element.style.transform = 'translateY(0) scale(1)';\r\n            }, 100);\r\n        } else {\r\n            element.style.transition = 'all 0.3s ease';\r\n            element.style.opacity = '0';\r\n            element.style.transform = 'translateY(-20px) scale(0.9)';\r\n\r\n            setTimeout(() => {\r\n                element.classList.add('hidden');\r\n                element.style.display = 'none'; // Properly hide\r\n            }, 300);\r\n        }\r\n    });\r\n}\r\n\r\neffect(() => {\r\n    const isLoading = state.isLoading.value;\r\n    if (isLoading) {\r\n        enhancedLog(\"‚è≥ System processing...\", \"info\");\r\n    }\r\n});\r\n\r\n// Initialize theme from localStorage\r\nfunction initializeTheme() {\r\n    const savedTheme = localStorage.getItem('theme');\r\n    if (savedTheme === 'dark') {\r\n        document.body.classList.add('dark');\r\n    }\r\n}\r\n\r\n// Loading state helper\r\nfunction setLoadingState(message) {\r\n    const loadingOverlay = document.getElementById('loading-overlay');\r\n    const loadingMessage = loadingOverlay?.querySelector('.loading-message-3d');\r\n    if (loadingMessage) {\r\n        loadingMessage.textContent = message;\r\n    }\r\n    showLoading();\r\n}\r\n\r\nasync function checkSSO() {\r\n    enhancedLog(\"üîç Checking ACEAS SSO status...\", \"info\");\r\n    setLoadingState(\"Checking authentication cache...\");\r\n\r\n    try {\r\n        // 1) Check local cache first\r\n        const cached = await oidc.getUser();\r\n        if (cached && !cached.expired) {\r\n            enhancedLog(\"‚úÖ Using cached ACEAS session\", \"success\");\r\n            enhancedLog(`üìã Cached User: ${JSON.stringify(cached.profile, null, 2)}`, \"info\");\r\n            updateAuthStatus(true, cached.profile);\r\n            return true;\r\n        }\r\n\r\n        // 2) Try silent signin (prompt=none)\r\n        setLoadingState(\"Verifying SSO session...\");\r\n        const user = await oidc.signinSilent();\r\n        if (user && !user.expired) {\r\n            enhancedLog(\"‚úÖ Silent signin successful - ACEAS SSO session active\", \"success\");\r\n            enhancedLog(`üìã Silent User: ${JSON.stringify(user.profile, null, 2)}`, \"info\");\r\n            updateAuthStatus(true, user.profile);\r\n            return true;\r\n        }\r\n    } catch (error) {\r\n        enhancedLog(`‚ö†Ô∏è ACEAS SSO check failed: ${error.message}`, \"warning\");\r\n    }\r\n\r\n    enhancedLog(\"‚ÑπÔ∏è No active ACEAS SSO session found\", \"info\");\r\n    updateAuthStatus(false);\r\n    return false;\r\n}\r\n\r\n// Simple theme toggle\r\nfunction toggleTheme() {\r\n    const body = document.body;\r\n    const isDark = body.classList.contains('dark');\r\n\r\n    if (isDark) {\r\n        body.classList.remove('dark');\r\n        localStorage.setItem('theme', 'light');\r\n        animationController.showToast('Switched to light theme');\r\n    } else {\r\n        body.classList.add('dark');\r\n        localStorage.setItem('theme', 'dark');\r\n        animationController.showToast('Switched to dark theme');\r\n    }\r\n\r\n    enhancedLog(`üé® Theme switched to ${isDark ? 'light' : 'dark'} mode`, 'info');\r\n}\r\n\r\nasync function bootstrapAuth() {\r\n    console.log(\"üöÄ Bootstrapping ACEAS authentication system...\");\r\n    state.isLoading.value = true;\r\n\r\n    try {\r\n        // Check for existing authentication\r\n        const isAuthenticated = await checkSSO();\r\n        state.isAuthenticated.value = isAuthenticated;\r\n\r\n        // Handle switcher hash (from working version)\r\n        if (!isAuthenticated && window.location.hash.includes(\"switcher\")) {\r\n            await oidc.signinRedirect();\r\n            return;\r\n        }\r\n\r\n        // Token lifecycle management (from working version)\r\n        oidc.events.addAccessTokenExpiring(async () => {\r\n            try {\r\n                await oidc.signinSilent();\r\n                enhancedLog(\"üîÑ Token expiring ‚Üí silent renew successful\", \"success\");\r\n            } catch (error) {\r\n                enhancedLog(`‚ö†Ô∏è Silent renew error: ${error.message}`, \"warning\");\r\n            }\r\n        });\r\n\r\n        oidc.events.addAccessTokenExpired(async () => {\r\n            try {\r\n                await oidc.signinSilent();\r\n                enhancedLog(\"üîÑ Token expired ‚Üí silent renew successful\", \"success\");\r\n            } catch (error) {\r\n                enhancedLog(`‚ùå Silent renew error: ${error.message}`, \"error\");\r\n                state.isAuthenticated.value = false;\r\n            }\r\n        });\r\n\r\n        oidc.events.addUserSignedOut(async () => {\r\n            await oidc.removeUser();\r\n            state.isAuthenticated.value = false;\r\n            enhancedLog(\"üëã User signed out\", \"info\");\r\n        });\r\n\r\n        enhancedLog(\"üéØ ACEAS authentication system initialized\", \"success\");\r\n        enhancedLog(`üìä Authentication status: ${isAuthenticated ? 'Active' : 'Inactive'}`, \"info\");\r\n\r\n    } catch (error) {\r\n        enhancedLog(`‚ùå Authentication bootstrap failed: ${error.message}`, \"error\");\r\n        console.error(\"Bootstrap error:\", error);\r\n        state.isAuthenticated.value = false;\r\n    } finally {\r\n        state.isLoading.value = false;\r\n        hideLoading();\r\n    }\r\n}\r\n\r\n// Setup enhanced event handlers with animations\r\nfunction setupEventHandlers() {\r\n    console.log(\"üîß Setting up event handlers...\");\r\n\r\n    // Debug: Check if elements exist\r\n    console.log(\"DOM Elements:\", {\r\n        loginBtn: !!loginBtn,\r\n        logoutBtn: !!logoutBtn,\r\n        userInfoBtn: !!userInfoBtn,\r\n        callApiBtn: !!callApiBtn,\r\n        switchBtn: !!switchBtn\r\n    });\r\n\r\n    // Authentication buttons\r\n    if (loginBtn) {\r\n        loginBtn.addEventListener(\"click\", handleLogin);\r\n        console.log(\"‚úÖ Login button event handler attached\");\r\n    }\r\n    if (logoutBtn) {\r\n        logoutBtn.addEventListener(\"click\", handleLogout);\r\n        console.log(\"‚úÖ Logout button event handler attached\");\r\n    }\r\n    if (userInfoBtn) {\r\n        userInfoBtn.addEventListener(\"click\", handleUserInfo);\r\n        console.log(\"‚úÖ UserInfo button event handler attached\");\r\n    }\r\n    if (callApiBtn) {\r\n        callApiBtn.addEventListener(\"click\", handleCallApi);\r\n        console.log(\"‚úÖ CallAPI button event handler attached\");\r\n    }\r\n    if (switchBtn) {\r\n        switchBtn.addEventListener(\"click\", handleSwitch);\r\n        console.log(\"‚úÖ Switch button event handler attached\");\r\n    }\r\n\r\n    // Console controls\r\n    if (clearConsoleBtn) {\r\n        clearConsoleBtn.addEventListener(\"click\", clearConsole);\r\n        console.log(\"‚úÖ Clear console button event handler attached\");\r\n    } else {\r\n        console.warn(\"‚ö†Ô∏è Clear console button not found\");\r\n    }\r\n\r\n    if (copyConsoleBtn) {\r\n        copyConsoleBtn.addEventListener(\"click\", copyConsoleContent);\r\n        console.log(\"‚úÖ Copy console button event handler attached\");\r\n    } else {\r\n        console.warn(\"‚ö†Ô∏è Copy console button not found\");\r\n    }\r\n\r\n    // Theme toggle\r\n    themeToggle?.addEventListener(\"click\", toggleTheme);\r\n\r\n    // Enhanced hover effects for action cards\r\n    document.querySelectorAll('.action-card').forEach(card => {\r\n        card.addEventListener('mouseenter', () => {\r\n            card.style.transition = 'all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\r\n        });\r\n    });\r\n\r\n    // Keyboard shortcuts\r\n    document.addEventListener('keydown', (e) => {\r\n        if (e.ctrlKey || e.metaKey) {\r\n            switch (e.key) {\r\n                case 'l':\r\n                    e.preventDefault();\r\n                    if (!state.isAuthenticated.value && loginBtn && !loginBtn.classList.contains('hidden')) {\r\n                        handleLogin();\r\n                    }\r\n                    break;\r\n                case 'k':\r\n                    e.preventDefault();\r\n                    clearConsole();\r\n                    break;\r\n                case 'u':\r\n                    e.preventDefault();\r\n                    if (state.isAuthenticated.value && userInfoBtn && !userInfoBtn.classList.contains('hidden')) {\r\n                        handleUserInfo();\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    });\r\n\r\n    console.log(\"üéØ All event handlers setup complete\");\r\n}\r\n\r\n// State effects with enhanced animations\r\neffect(() => {\r\n    const isAuthenticated = state.isAuthenticated.value;\r\n    console.log(`üîÑ Authentication state changed: ${isAuthenticated}`);\r\n\r\n    // Simple UI toggle like the working version but using CSS classes\r\n    if (isAuthenticated) {\r\n        loginBtn.classList.add('hidden');\r\n        logoutBtn.classList.remove('hidden');\r\n        userInfoBtn.classList.remove('hidden');\r\n        callApiBtn.classList.remove('hidden');\r\n    } else {\r\n        loginBtn.classList.remove('hidden');\r\n        logoutBtn.classList.add('hidden');\r\n        userInfoBtn.classList.add('hidden');\r\n        callApiBtn.classList.add('hidden');\r\n    }\r\n\r\n    updateAuthStatus(isAuthenticated, state.userInfo.value);\r\n\r\n    if (isAuthenticated) {\r\n        enhancedLog(\"üéâ User successfully authenticated in ACEAS\", \"success\");\r\n        animationController.showToast(\"Welcome to ACEAS! Authentication successful.\", \"success\");\r\n\r\n        // Handlers are now properly set up via addEventListener in setupEventHandlers\r\n    } else {\r\n        enhancedLog(\"üë§ User not authenticated - showing login options\", \"info\");\r\n    }\r\n});\r\n\r\neffect(() => {\r\n    const isLoading = state.isLoading.value;\r\n    if (isLoading) {\r\n        enhancedLog(\"‚è≥ System processing...\", \"info\");\r\n    }\r\n});\r\n\r\n// Initialize everything when DOM is ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    console.log(\"üîß Initializing ACEAS Enterprise Authentication Platform...\");\r\n\r\n    // Initialize theme\r\n    initializeTheme();\r\n\r\n    // Setup event handlers first\r\n    setupEventHandlers();\r\n\r\n    // Initialize animation system\r\n    setTimeout(() => {\r\n        animationController.init();\r\n    }, 100);\r\n\r\n    // Enhance loading overlay with particle effects\r\n    setTimeout(() => {\r\n        if (typeof window.InteractiveEffects !== 'undefined') {\r\n            window.InteractiveEffects.enhanceLoadingOverlay();\r\n        }\r\n    }, 200);\r\n\r\n    // Add test function for enhanced loading (remove in production)\r\n    window.testEnhancedLoading = function () {\r\n        setLoadingState('Testing Enhanced 3D Loading...');\r\n        setTimeout(() => {\r\n            hideLoading();\r\n        }, 4000);\r\n    };\r\n\r\n    // Add test function for 3D scroll effects (remove in production)\r\n    window.test3DScrollEffects = function () {\r\n        const effects = [\r\n            'scroll-fade-in', 'scroll-slide-left', 'scroll-slide-right', 'scroll-scale-up',\r\n            'scroll-3d-flip', 'scroll-3d-rotate', 'scroll-3d-bounce', 'scroll-3d-fold',\r\n            'scroll-3d-depth', 'scroll-3d-parallax', 'scroll-3d-perspective'\r\n        ];\r\n\r\n        console.log('üé≠ Testing 3D Scroll Effects...');\r\n        effects.forEach(effect => {\r\n            const elements = document.querySelectorAll(`.${effect}`);\r\n            console.log(`${effect}: ${elements.length} elements found`);\r\n        });\r\n        console.log('üí° Scroll down to see the 3D effects in action!');\r\n    };\r\n\r\n    // Test function for true 3D perspective scaling\r\n    window.testPerspectiveScaling = function () {\r\n        console.log('üåü Testing True 3D Perspective Scaling...');\r\n\r\n        const perspectiveElements = document.querySelectorAll('.scroll-3d-perspective');\r\n        console.log(`Found ${perspectiveElements.length} perspective elements`);\r\n\r\n        perspectiveElements.forEach((el, i) => {\r\n            const rect = el.getBoundingClientRect();\r\n            const centerX = window.innerWidth / 2;\r\n            const centerY = window.innerHeight / 2;\r\n            const elementCenterX = rect.left + rect.width / 2;\r\n            const elementCenterY = rect.top + rect.height / 2;\r\n\r\n            console.log(`Element ${i + 1}:`, {\r\n                position: { x: Math.round(elementCenterX), y: Math.round(elementCenterY) },\r\n                distanceFromCenter: Math.round(Math.sqrt(\r\n                    Math.pow(elementCenterX - centerX, 2) +\r\n                    Math.pow(elementCenterY - centerY, 2)\r\n                )),\r\n                currentTransform: el.style.transform || 'none'\r\n            });\r\n        });\r\n\r\n        console.log('‚úÖ Perspective scaling analysis completed');\r\n        console.log('üí° Scroll or resize to see real-time perspective changes!');\r\n    };\r\n\r\n    // Initialize authentication\r\n    setTimeout(() => {\r\n        bootstrapAuth();\r\n    }, 500);\r\n\r\n    // Add initial welcome message and hide loading\r\n    setTimeout(() => {\r\n        enhancedLog(\"üèõÔ∏è ACEAS - Agency Corporate E-Authentication Service\", \"info\");\r\n        enhancedLog(\"üîê Enterprise-grade authentication powered by Keycloak\", \"info\");\r\n        enhancedLog(\"üåü Modern SaaS platform ready for interaction\", \"success\");\r\n        enhancedLog(\"üí° Tip: Use Ctrl+L to login, Ctrl+K to clear console, Ctrl+U for user info\", \"info\");\r\n\r\n        // Hide loading overlay after initialization\r\n        hideLoading();\r\n    }, 2500);\r\n});\r\n\r\n// Handle page visibility changes\r\ndocument.addEventListener('visibilitychange', () => {\r\n    if (!document.hidden && state.isAuthenticated.value) {\r\n        // Check if session is still valid when page becomes visible\r\n        checkSSO();\r\n    }\r\n});\r\n\r\n// Export for testing purposes\r\nwindow.aceaAuth = {\r\n    state,\r\n    login: handleLogin,\r\n    logout: handleLogout,\r\n    userInfo: handleUserInfo,\r\n    callApi: handleCallApi,\r\n    clearConsole,\r\n    animationController\r\n};\r\n\r\nconsole.log(\"üéØ ACEAS authentication system fully loaded and ready!\");"],"names":["loginBtn","logoutBtn","userInfoBtn","callApiBtn","switchBtn","authStatus","clearConsoleBtn","copyConsoleBtn","themeToggle","state","signal","AceaAnimationController","observerOptions","observer","entries","entry","el","parallaxElements","rate","element","index","offset","card","e","rect","x","y","centerX","centerY","rotateX","rotateY","loadingOverlay","consoleWrapper","button","type","ripple","message","toast","messageElement","animationController","handleLogin","enhancedLog","oidc","error","handleLogout","handleUserInfo","u","info","handleCallApi","r","callApi","handleSwitch","prefix","styledMessage","consoleOutput","newLine","clearConsole","copyConsoleContent","textContent","updateAuthStatus","isAuthenticated","userInfo","statusPulse","statusText","consoleStatus","indicator","text","effect","initializeTheme","setLoadingState","loadingMessage","showLoading","checkSSO","cached","user","toggleTheme","body","isDark","bootstrapAuth","hideLoading","setupEventHandlers","elements","elementCenterX","elementCenterY"],"mappings":"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"}