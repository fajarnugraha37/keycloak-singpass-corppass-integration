{"version":3,"file":"errors-DKwqV2ME-mgxfcc74.js","sources":["../../web/errors.js"],"sourcesContent":["import './errors.css';\r\n\r\n// Error page interactive features\r\nclass ErrorPageEnhancer {\r\n    constructor() {\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.addKeyboardShortcuts();\r\n        this.addVisualEnhancements();\r\n        this.addAccessibilityFeatures();\r\n        this.trackErrors();\r\n    }\r\n\r\n    addKeyboardShortcuts() {\r\n        document.addEventListener('keydown', (e) => {\r\n            // Press 'H' to go home\r\n            if (e.key === 'h' || e.key === 'H') {\r\n                window.location.href = '/';\r\n            }\r\n            \r\n            // Press 'B' to go back\r\n            if (e.key === 'b' || e.key === 'B') {\r\n                history.back();\r\n            }\r\n            \r\n            // Press 'R' to reload\r\n            if (e.key === 'r' || e.key === 'R') {\r\n                location.reload();\r\n            }\r\n            \r\n            // Press Escape to show help\r\n            if (e.key === 'Escape') {\r\n                this.showKeyboardHelp();\r\n            }\r\n        });\r\n    }\r\n\r\n    addVisualEnhancements() {\r\n        // Add subtle parallax effect to floating elements\r\n        const floatingElements = document.querySelectorAll('.animate-float');\r\n        \r\n        if (floatingElements.length > 0 && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {\r\n            let animationId;\r\n            \r\n            const handleMouseMove = (e) => {\r\n                if (animationId) cancelAnimationFrame(animationId);\r\n                \r\n                animationId = requestAnimationFrame(() => {\r\n                    const { clientX, clientY } = e;\r\n                    const { innerWidth, innerHeight } = window;\r\n                    \r\n                    const xPercent = (clientX / innerWidth - 0.5) * 2;\r\n                    const yPercent = (clientY / innerHeight - 0.5) * 2;\r\n                    \r\n                    floatingElements.forEach((element) => {\r\n                        const intensity = 10;\r\n                        const x = xPercent * intensity;\r\n                        const y = yPercent * intensity;\r\n                        \r\n                        element.style.transform = `translate(${x}px, ${y}px)`;\r\n                    });\r\n                });\r\n            };\r\n            \r\n            document.addEventListener('mousemove', handleMouseMove);\r\n            \r\n            // Reset on mouse leave\r\n            document.addEventListener('mouseleave', () => {\r\n                floatingElements.forEach((element) => {\r\n                    element.style.transform = '';\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    addAccessibilityFeatures() {\r\n        // Add focus indicators for better keyboard navigation\r\n        const focusableElements = document.querySelectorAll('a, button, [tabindex]:not([tabindex=\"-1\"])');\r\n        \r\n        focusableElements.forEach((element) => {\r\n            element.addEventListener('focus', () => {\r\n                element.style.outline = '3px solid #3b82f6';\r\n                element.style.outlineOffset = '2px';\r\n            });\r\n            \r\n            element.addEventListener('blur', () => {\r\n                element.style.outline = '';\r\n                element.style.outlineOffset = '';\r\n            });\r\n        });\r\n\r\n        // Announce error state to screen readers\r\n        const errorTitle = document.querySelector('h1, h2');\r\n        if (errorTitle) {\r\n            errorTitle.setAttribute('aria-live', 'polite');\r\n            errorTitle.setAttribute('role', 'alert');\r\n        }\r\n    }\r\n\r\n    showKeyboardHelp() {\r\n        // Create and show keyboard shortcuts modal\r\n        const modal = document.createElement('div');\r\n        modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';\r\n        modal.innerHTML = `\r\n            <div class=\"bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl\">\r\n                <h3 class=\"text-xl font-bold text-gray-900 mb-6\">Keyboard Shortcuts</h3>\r\n                <div class=\"space-y-3\">\r\n                    <div class=\"flex justify-between items-center\">\r\n                        <span class=\"text-gray-600\">Go Home</span>\r\n                        <kbd class=\"px-2 py-1 bg-gray-100 rounded text-sm font-mono\">H</kbd>\r\n                    </div>\r\n                    <div class=\"flex justify-between items-center\">\r\n                        <span class=\"text-gray-600\">Go Back</span>\r\n                        <kbd class=\"px-2 py-1 bg-gray-100 rounded text-sm font-mono\">B</kbd>\r\n                    </div>\r\n                    <div class=\"flex justify-between items-center\">\r\n                        <span class=\"text-gray-600\">Reload Page</span>\r\n                        <kbd class=\"px-2 py-1 bg-gray-100 rounded text-sm font-mono\">R</kbd>\r\n                    </div>\r\n                    <div class=\"flex justify-between items-center\">\r\n                        <span class=\"text-gray-600\">Show Help</span>\r\n                        <kbd class=\"px-2 py-1 bg-gray-100 rounded text-sm font-mono\">ESC</kbd>\r\n                    </div>\r\n                </div>\r\n                <button onclick=\"this.closest('.fixed').remove()\" class=\"mt-6 w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors\">\r\n                    Close\r\n                </button>\r\n            </div>\r\n        `;\r\n        \r\n        document.body.appendChild(modal);\r\n        \r\n        // Close on click outside\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) {\r\n                modal.remove();\r\n            }\r\n        });\r\n        \r\n        // Close on Escape\r\n        const closeOnEscape = (e) => {\r\n            if (e.key === 'Escape') {\r\n                modal.remove();\r\n                document.removeEventListener('keydown', closeOnEscape);\r\n            }\r\n        };\r\n        document.addEventListener('keydown', closeOnEscape);\r\n    }\r\n\r\n    trackErrors() {\r\n        // Simple error tracking (can be extended with analytics)\r\n        const errorData = {\r\n            page: window.location.pathname,\r\n            referrer: document.referrer,\r\n            userAgent: navigator.userAgent,\r\n            timestamp: new Date().toISOString(),\r\n            type: document.title.includes('404') ? '404' : '5xx'\r\n        };\r\n\r\n        // Store in localStorage for debugging\r\n        const errorLog = JSON.parse(localStorage.getItem('errorLog') || '[]');\r\n        errorLog.push(errorData);\r\n        \r\n        // Keep only last 10 errors\r\n        if (errorLog.length > 10) {\r\n            errorLog.shift();\r\n        }\r\n        \r\n        localStorage.setItem('errorLog', JSON.stringify(errorLog));\r\n\r\n        // Console log for development\r\n        console.group('ðŸš¨ Error Page Loaded');\r\n        console.table(errorData);\r\n        console.groupEnd();\r\n    }\r\n}\r\n\r\n// Auto-refresh functionality for server errors\r\nclass ServerErrorManager {\r\n    constructor() {\r\n        if (document.title.includes('Server Error')) {\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.retryCount = 0;\r\n        this.maxRetries = 5;\r\n        this.baseDelay = 30000; // 30 seconds\r\n        \r\n        this.startAutoRefresh();\r\n        this.addRetryButton();\r\n    }\r\n\r\n    startAutoRefresh() {\r\n        const delay = this.baseDelay * Math.pow(1.5, this.retryCount); // Exponential backoff\r\n        \r\n        setTimeout(() => {\r\n            if (this.retryCount < this.maxRetries) {\r\n                this.retryCount++;\r\n                console.log(`Auto-refresh attempt ${this.retryCount}/${this.maxRetries}`);\r\n                location.reload();\r\n            } else {\r\n                this.showMaxRetriesMessage();\r\n            }\r\n        }, delay);\r\n    }\r\n\r\n    addRetryButton() {\r\n        const tryAgainButton = document.querySelector('button[onclick*=\"reload\"]');\r\n        if (tryAgainButton) {\r\n            const originalOnClick = tryAgainButton.onclick;\r\n            tryAgainButton.onclick = () => {\r\n                this.retryCount = 0; // Reset retry count on manual retry\r\n                originalOnClick();\r\n            };\r\n        }\r\n    }\r\n\r\n    showMaxRetriesMessage() {\r\n        const notification = document.createElement('div');\r\n        notification.className = 'fixed top-4 right-4 bg-amber-100 border border-amber-400 text-amber-800 px-4 py-3 rounded-lg shadow-lg z-50';\r\n        notification.innerHTML = `\r\n            <div class=\"flex items-center\">\r\n                <svg class=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path>\r\n                </svg>\r\n                <span>Auto-refresh disabled. Please try again manually.</span>\r\n            </div>\r\n        `;\r\n        \r\n        document.body.appendChild(notification);\r\n        \r\n        setTimeout(() => {\r\n            notification.remove();\r\n        }, 5000);\r\n    }\r\n}\r\n\r\n// Initialize when DOM is ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    new ErrorPageEnhancer();\r\n    new ServerErrorManager();\r\n});\r\n\r\nexport { ErrorPageEnhancer, ServerErrorManager };"],"names":["ErrorPageEnhancer","floatingElements","animationId","handleMouseMove","e","clientX","clientY","innerWidth","innerHeight","xPercent","yPercent","element","x","errorTitle","modal","closeOnEscape","errorData","errorLog","ServerErrorManager","delay","tryAgainButton","originalOnClick","notification"],"mappings":"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"}